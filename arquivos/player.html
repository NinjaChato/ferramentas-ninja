<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <title>Jogando... | Ferramentas Ninja</title>
    <style>
        /* Remove qualquer margem, preenchimento e barra de rolagem */
        body, html {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            background-color: #000; /* Fundo preto para imersão total */
        }
        /* O container do jogo também ocupa 100% do espaço */
        #game-container {
            width: 100%;
            height: 100%;
        }
    </style>
</head>
<body>

    <div id="game-container"></div>

    <script>
        // Função do WebRetro para criar o embed
        function webretroEmbed(node, path, queries) {
            node.innerHTML = '';
            var frame = document.createElement("iframe");
            // Adiciona a permissão 'fullscreen' ao iframe
            frame.setAttribute('allow', 'fullscreen');
            frame.style = "border: none; display: block; width: 100%; height: 100%;";
            
            if (queries.rom) {
                var link = document.createElement("a");
                link.href = (/^(https?:)?\/\//i).test(queries.rom) ? queries.rom : "roms/" + queries.rom;
                queries.rom = link.href;
            }
            
            frame.src = path + "?" + Object.entries(queries).map(i => i.map(i => i && encodeURIComponent(i))).map(i => i[1] ? i.join("=") : i[0]).join("&");
            node.appendChild(frame);
            
            return frame;
        }

        // Lógica para carregar o jogo a partir da URL
        window.addEventListener('load', () => {
            const gameContainer = document.getElementById('game-container');
            const params = new URLSearchParams(window.location.search);
            const system = params.get('system');
            const rom = params.get('rom');

            if (system && rom) {
                const webretroPath = "https://binbash.dev/webretro-builds/stable/";
                webretroEmbed(gameContainer, webretroPath, { system: system, rom: rom });
            } else {
                // Mensagem de erro simples caso a URL esteja incompleta
                document.body.innerHTML = "<p style='color: white; text-align: center; padding-top: 2rem;'>Erro: Jogo não encontrado.</p>";
            }
        });
    </script>

</body>
</html>
